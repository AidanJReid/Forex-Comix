{% extends 'base.html' %} {% block content %}

<div class="container">
    <h2 class="center-align">Search {{ page_title }}</h2>
    <p class="center-align">You can search our existing catalogue of comics for language or genre using the relevant filter toggle.</p>
    <div class="row">
        <div class="col s12">
            <ul class="collapsible">
                <li>
                    <div class="collapsible-header"><i class="material-icons">arrow_drop_down</i>Comic Get 'Em</div>
                    <div class="collapsible-body">
                        <form action="{{ url_for('filter_comic') }}" method="GET">
                            <div class="row">
                                <div class="input-field col s12 m6">
                                    <i class="material-icons prefix">account_circle</i>
                                    <select id="filter_language" name="filter_language">  
                                        <option value="" selected>Filter By Language</option>
                                        {% for language in languages %}
                                        <option value="{{ language.language }}" selected>{{ language.language }}</option>
                                        {% endfor %}
                                    </select>
                                    <label for="language">Language</label>
                                </div>
                                <div class="input-field col s12 m6">
                                    <i class="material-icons prefix">account_circle</i>
                                    <select id="filter_genre" name="filter_genre">
                                        <option value="" selected>Filter By Genre</option>
                                        {% for genre in genre %}
                                        <option value="{{ genre.genre }}">{{ genre.genre }}</option>
                                        {% endfor %}
                                    </select>
                                    <label for="genre">Genre</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s12 m6 center-align">
                                    <a class="waves-effect waves-light btn-large blue" type="submit" href="{{url_for('filter_comic')}}">Find Comic</a>
                                </div>
                                <div class="col s12 m6 center-align">
                                    <a class="waves-effect waves-light btn-large indigo" type="submit" href="{{ url_for('database') }}">Reset Search</a>
                                </div>
                            </div>
                        </form>
                    </div>
        </div>
    </div>
</div>
<br>
<div class="container" id="comics">
    <h4 class="center-align">Showing Selected Comics</h4>
    <hr class="hr-sections">
</div>
<div class="container">
    <div class="row">

        {% for comic in DBComix %}

        <div class="col s12 m3">
            <div class="card large sticky-action">
                <div class="card-image waves-effect waves-block waves-light">
                    <img class="activator" src="{{ comic.image_source }}">
                </div>
                <div class="card-content">
                    <span class="card-title activator grey-text text-darken-4"><a href="{{url_for('get_comic', DBComix_id=comic._id)}}">{{ comic.title }}</a><i class="material-icons right">more_vert</i></span>
                    <div class="card-action">
                        <a class="waves-effect waves-light btn-small red left" type="submit" href="{{url_for('edit_comic', DBComix_id=comic._id)}}">Edit</a>
                        <a class="waves-effect waves-light btn-small right view" onclick="$('#modal1').modal('open');">Delete</a>
                        <!-- Modal Structure -->
                        <div id="modal1" class="modal">
                            <div class="modal-content">
                                <h4>Are you sure you want to delete this?</h4>
                                <p>Go ahead. I dare you.</p>
                            </div>
                            <div class="modal-footer">
                                <a href="{{url_for('delete_comic', DBComix_id=comic._id)}}" class=" modal-action modal-close waves-effect waves-green btn-flat">Agree</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-reveal">
                    <span class="card-title grey-text text-darken-4">{{ comic.language }}<i class="material-icons right">close</i></span>
                    <h5><a href="{{url_for('get_comic', DBComix_id=comic._id)}}">{{ comic.title }}</a></h5>
                    <hr>
                    <ul>
                        <li>Language: {{ comic.language }}</li>
                        <li>Genre: {{ comic.genre }}</li>
                        <li>Difficulty: {{ comic.difficulty }}</li>
                        <li>Condition: {{ comic.condition }}</li>
                        <li>Character: {{ comic.character }}</li>
                        <p>Description: {{ comic.description }}</p>
                    </ul>
                </div>
            </div>
        </div>

        {% endfor %}
    </div>
</div>
</div>

{% endblock %}
